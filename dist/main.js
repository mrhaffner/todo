(()=>{const e={projectArr:[{name:"Default Project",projId:0,currentTaskId:2,tasks:[{name:"default task",taskId:0},{name:"second default task",taskId:1}]}],currentId:1};function t(t,n){document.getElementById(`side_${t}_delete`).addEventListener("click",(()=>{let r=e.projectArr.findIndex((e=>e===+t));e.projectArr.slice(r,1),n.remove(),document.getElementById(t+"_proj")&&d()}))}function n(e,t,n){e.addEventListener("click",(()=>{d(),r(t,n)}))}function d(){const e=document.getElementById("proj_div");for(;e.firstChild;)e.removeChild(e.firstChild)}function r(t,n){const d=document.getElementById("proj_div"),r=`<div id="${n}_proj">\n            <div id="${n}_proj_top">\n                <div id="${n}_proj_title_div">\n                    <h2 id="${n}_proj_title">${t}</h2>\n                </div>\n                <div id="${n}_proj_btn_div">\n                    <input type="text" id="${n}_proj_task_input">\n                    <button id="${n}_proj_btn">New Task</button>\n                </div>\n            </div>\n            <div id="${n}_proj_task_div">\n            </div>\n        </div>`;d.innerHTML=r;const o=document.getElementById(n+"_proj_task_div");e.projectArr.filter((e=>e.projId===+n))[0].tasks.forEach((e=>i(e.name,e.taskId,n,o))),function(t,n){document.getElementById(t+"_proj_btn").addEventListener("click",(()=>{const d=document.getElementById(t+"_proj_task_input").value;let r=e.projectArr.findIndex((e=>e.projId===+t)),o=e.projectArr[r].currentTaskId;e.projectArr[r].currentTaskId++,e.projectArr[r].tasks.push(((e,t)=>({name:e,taskId:t}))(d,o)),i(d,o,t,n)}))}(n,o)}function i(t,n,d,r){let i=document.createElement("div");i.id=`${d}_proj_${n}_task_div`;let o=`<p>${t}</p>\n        <button id='task_${n}_delete'>Delete</button>`;i.innerHTML=o,r.appendChild(i),function(t,n){let d=document.getElementById(`task_${t}_delete`);d.addEventListener("click",(()=>{let r=e.projectArr.findIndex((e=>e.projId===+n)),i=e.projectArr[r].tasks.findIndex((e=>e.taskId===+t));console.log(i),e.projectArr[r].tasks.splice(i,1),console.log(d.parentElement),d.parentElement.remove()}))}(n,d)}document.getElementById("proj_form_submit_btn").addEventListener("click",(()=>{const d=document.getElementById("proj_title_input").value;let r=e.currentId;e.currentId++,e.projectArr.push({name:d,projId:r,currentTaskId:0,tasks:[]}),function(e,d){const r=document.getElementById("side_proj_div");let i=document.createElement("div");i.id=`side_${d}_div`;let o=`<h3 id=side_${d}_title">${e}</h3>\n        <button id="side_${d}_delete">Delete</button>`;i.innerHTML=o,r.appendChild(i),n(i.firstChild,e,d),t(d,i)}(d,r)})),r("Default Project",0);let o=document.getElementById("side_0_title");n(o,"Default Project",0),t(0,o.parentElement)})();